<div class="grid-card-container card-bottom-margin">
  <form [formGroup]="formGroup" class="grid-form">

    <!-- begin::Permission Group -->
    <div class="form-group">
      <label class="form-label required">Group</label>
      <mat-select class="form-control form-control-sm myPanelClass" disableOptionCentering
        placeholder="Select Enrollment Type">
        <input type="text" class="form-control  form-control-sm" formControlName="group" #filterPermissionGroup>
        <div *ngIf="allPermissionGroupList | async as postdata ">
          <mat-option *ngFor="let data of postdata | filterData: filterPermissionGroup.value : 'group'"
            [value]="data.group">
            {{data.group}}
          </mat-option>
        </div>
      </mat-select>
      <div class="invalid-feedback">
        {{validationMsg.getErrorMessage(formControll.group,"Group")}}
      </div>
    </div>
    <!-- end::Permission Group -->

    <!-- begin::Buttons -->
    <div class="grid-button-inline form-group pt-4">
      <ng-container>
        <button class="btn btn-success mx-3" [disabled]="!formGroup.valid" (click)="save()">Save</button>
      </ng-container>
      <button class="btn btn-danger" (click)="resetLists()">Reset</button>
    </div>
    <!-- end::Buttons -->
  </form>
</div>

<!--begin::second Card body-->
<div class="grid-card-container card-bottom-padding pt-2">
  <!--<form [formGroup]="formGroup">
    <div class="permission-container d-flex align-items-center w-100">
      <label>Manage Permissions : </label>
      <div class="m-2" *ngIf="sourceList.length != 0">
        <button class="btn btn-outline-secondary btn-sm" (click)="giveAllPermissions()"><i class="fa fa-unlock"></i> Give all
          Permissions</button>
      </div>
      <div class="m-2" *ngIf="destinationList.length != 0">
        <button class="btn btn-outline-secondary btn-sm" (click)="denyAllPermissions()"><i class="fa fa-lock"></i> Deny all
          Permissions</button>
      </div>
    </div>

    <span class="text-info mb-3"><i class="fa fa-info-circle"></i> Note : To give selected permission, <b>Drag</b> permission from first box and <b>Drop</b> it in
      second box and vice-versa.</span>
    <div cdkDropListGroup>
      <div class="permission-container form-group">
        <h2>List of All Permissions</h2>

        <div cdkDropList [cdkDropListData]="sourceList" class="permission-list" cdkDropListSortingDisabled
          (cdkDropListDropped)="drop($event)">
          <div class="permission-box" *ngFor="let item of sourceList" cdkDrag>{{item}}</div>
        </div>
      </div>

      <div class="permission-container form-group">
        <h2>Current Permissions</h2>

        <div cdkDropList [cdkDropListData]="destinationList" class="permission-list" formControlName="permission"
          (cdkDropListDropped)="drop($event)">
          <div class="permission-box" *ngFor="let item of destinationList" cdkDrag>{{item}}</div>
        </div>
      </div>
    </div>
  </form>-->

  <form [formGroup]="formGroup">
    <div class="permission-container d-flex align-items-center w-100" *matTreeNodeDef="let node; when: hasChild">
      <label>Manage Permissions : </label>
      <div class="m-2" *ngIf="sourceList.length != 0">
        <button class="btn btn-outline-secondary btn-sm" (click)="menuItemSelectionToggle(node)"><i class="fa fa-unlock"></i>
          Give all
          Permissions</button>
      </div>
      <div class="m-2" *ngIf="destinationList.length != 0">
        <button class="btn btn-outline-secondary btn-sm" (click)="menuItemSelectionToggle(node)"><i class="fa fa-lock"></i> Deny
          all
          Permissions</button>
      </div>
    </div>

    <span class="text-info mb-3"><i class="fa fa-info-circle"></i> Note : To give selected permission, <b>Tick</b>
      on checkBox in corresponding <b>Permissions</b> and uncheck to remove the permission.</span>
    <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
      <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle matTreeNodePadding>
        <button mat-icon-button disabled></button>
        <mat-checkbox class="checklist-leaf-node" [checked]="checkboxSelections.isSelected(node)"
          (change)="menuLeafItemSelectionToggle(node)">{{node.text}}</mat-checkbox>
      </mat-tree-node>

      <!-- <mat-tree-node *matTreeNodeDef="let node; when: hasNoContent" matTreeNodePadding>
      <button mat-icon-button disabled></button>
      <mat-form-field>
        <mat-label>New item...</mat-label>
        <input matInput #itemValue placeholder="Ex. Lettuce">
      </mat-form-field>-->
      <!-- <button mat-button (click)="saveNode(node, itemValue.value)">Save</button>-->
      <!--</mat-tree-node>-->

      <mat-tree-node *matTreeNodeDef="let node; when: hasChild" matTreeNodePadding>
        <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'Toggle ' + node.item">
          <mat-icon class="mat-icon-rtl-mirror">
            {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
          </mat-icon>
        </button>
        <mat-checkbox [checked]="descendantsAllSelected(node)" [indeterminate]="descendantsPartiallySelected(node)"
          (change)="menuItemSelectionToggle(node)">{{node.text}}</mat-checkbox>
        <!-- <button mat-icon-button (click)="addNewItem(node)"><mat-icon>add</mat-icon></button>-->
        <!--<button class="submit-button" mat-raised-button (click)="getSelectedItems(node)">get selected items</button>
      </mat-tree-node>
      
    </mat-tree>
    

<p #outputDiv></p>
  </form>

</div>
<!--end::second Card body-->